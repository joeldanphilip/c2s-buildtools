#!/bin/bash
builddir=`dirname "$0"`
GCONV_PATH="${builddir}/iconvdata"

usage () {
cat << EOF
Usage: $0 [OPTIONS] <program> [ARGUMENTS...]

  --tool=TOOL  Run with the specified TOOL. It can be strace, rpctrace,
               valgrind or container. The container will run within
               support/test-container.  For strace and valgrind,
               additional arguments can be passed after the tool name.
EOF

  exit 1
}

toolname=default
while test $# -gt 0 ; do
  case "$1" in
    --tool=*)
      toolname="${1:7}"
      shift
      ;;
    --*)
      usage
      ;;
    *)
      break
      ;;
  esac
done

if test $# -eq 0 ; then
  usage
fi

case "$toolname" in
  default)
    exec   env GCONV_PATH="${builddir}"/iconvdata LOCPATH="${builddir}"/localedata LC_ALL=C  "${builddir}"/elf/ld-linux-riscv32-ilp32.so.1 --library-path "${builddir}":"${builddir}"/math:"${builddir}"/elf:"${builddir}"/dlfcn:"${builddir}"/nss:"${builddir}"/nis:"${builddir}"/rt:"${builddir}"/resolv:"${builddir}"/mathvec:"${builddir}"/support:"${builddir}"/crypt:"${builddir}"/nptl ${1+"$@"}
    ;;
  strace*)
    exec $toolname  -EGCONV_PATH=/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/iconvdata  -ELOCPATH=/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/localedata  -ELC_ALL=C  /home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/elf/ld-linux-riscv32-ilp32.so.1 --library-path /home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/math:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/elf:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/dlfcn:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/nss:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/nis:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/rt:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/resolv:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/mathvec:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/support:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/crypt:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/nptl ${1+"$@"}
    ;;
  rpctrace)
    exec rpctrace  -EGCONV_PATH=/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/iconvdata  -ELOCPATH=/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/localedata  -ELC_ALL=C  /home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/elf/ld-linux-riscv32-ilp32.so.1 --library-path /home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/math:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/elf:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/dlfcn:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/nss:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/nis:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/rt:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/resolv:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/mathvec:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/support:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/crypt:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/nptl ${1+"$@"}
    ;;
  valgrind*)
    exec env GCONV_PATH=/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/iconvdata LOCPATH=/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/localedata LC_ALL=C $toolname  /home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/elf/ld-linux-riscv32-ilp32.so.1 --library-path /home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/math:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/elf:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/dlfcn:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/nss:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/nis:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/rt:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/resolv:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/mathvec:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/support:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/crypt:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/nptl ${1+"$@"}
    ;;
  container)
    exec env GCONV_PATH=/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/iconvdata LOCPATH=/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/localedata LC_ALL=C  /home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/elf/ld-linux-riscv32-ilp32.so.1 --library-path /home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/math:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/elf:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/dlfcn:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/nss:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/nis:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/rt:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/resolv:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/mathvec:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/support:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/crypt:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/nptl /home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/support/test-container env GCONV_PATH=/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/iconvdata LOCPATH=/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/localedata LC_ALL=C  /home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/elf/ld-linux-riscv32-ilp32.so.1 --library-path /home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/math:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/elf:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/dlfcn:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/nss:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/nis:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/rt:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/resolv:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/mathvec:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/support:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/crypt:/home/joelphilip/Documents/C2S/Trisul32/trisul32_buildroot-master/buildroot/output/build/glibc-2.36-81-g4f4d7a13edfd2fdc57c9d76e1fd6d017fb47550c/build/nptl ${1+"$@"}
    ;;
  *)
    usage
    ;;
esac
